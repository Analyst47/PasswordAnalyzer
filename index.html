<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fahim's Password Analyzer</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Orbitron', monospace;
  background: #0a0f18;
  color: #00ffea;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  overflow: hidden;
}

/* Background canvas */
#bgCanvas {
  position: fixed;
  top: 0;
  left: 0;
  z-index: -2;
}

/* Cyber wave behind card */
#waveCanvas {
  position: fixed;
  top:0;
  left:0;
  z-index:-1;
}

/* Container card */
#container {
  background: rgba(0,0,0,0.85);
  padding: 40px;
  border-radius: 20px;
  box-shadow: 0 0 30px #00ffea88, 0 0 60px #00bcd4aa;
  width: 90%;
  max-width: 600px;
  text-align: center;
  position: relative;
}

/* Header */
header {
  font-size: 2.8em;
  text-shadow: 0 0 10px #00ffea, 0 0 20px #00bcd4;
  letter-spacing: 2px;
  margin-bottom: 30px;
}

/* Input */
input[type="password"] {
  width: 90%;
  padding: 15px;
  font-size: 1em;
  margin-bottom: 20px;
  border-radius: 10px;
  border: 2px solid #00ffea;
  background: #001622;
  color: #00ffea;
  text-align: center;
}

/* Buttons */
button {
  padding: 12px 25px;
  font-size: 1em;
  margin: 10px;
  border-radius: 10px;
  border: none;
  background: #00ffea;
  color: #000;
  cursor: pointer;
  transition: 0.3s;
}
button:hover {
  background: #00bcd4;
  transform: scale(1.05);
}

/* Strength Meter */
.meter {
  height: 20px;
  width: 90%;
  background: #001622;
  border-radius: 10px;
  margin: 10px auto;
  overflow: hidden;
  box-shadow: 0 0 10px #00ffea66 inset;
}
.meter-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg,#ff0033,#ffcc00,#33ff33,#00ffff);
  transition: width 0.5s ease;
  box-shadow: 0 0 15px #00ffea;
}

/* Text indicators */
#strength, #entropy, #complexity, #breach {
  margin: 10px 0;
  font-weight: bold;
  text-shadow: 0 0 5px #00ffea;
}

/* Generated password box */
#generatedBox {
  background: #001622cc;
  border: 2px solid #00ffea;
  border-radius: 10px;
  padding: 15px;
  margin: 15px 0;
  display: none;
  position: relative;
}
#generatedBox button {
  margin-top: 10px;
}

/* Particle effect */
.particle {
  position: absolute;
  width: 3px;
  height: 3px;
  background: #00ffea;
  border-radius: 50%;
  opacity: 0.8;
}

/* Glow alert */
.glow-alert {
  animation: glow 1s infinite alternate;
}
@keyframes glow {
  0% { text-shadow: 0 0 5px #ff0033; }
  50% { text-shadow: 0 0 15px #ff3300; }
  100% { text-shadow: 0 0 25px #ff6600; }
}

/* Proof mode panel */
#proofPanel {
  background: #001622cc;
  border: 2px solid #00ffea;
  border-radius: 10px;
  padding: 15px;
  margin-top: 15px;
  text-align: left;
  max-height: 250px;
  overflow-y: auto;
  font-size: 0.85em;
  display: none;
}
#proofPanel h4 { margin-bottom: 5px; color: #ffcc00; }
</style>
</head>
<body>

<canvas id="bgCanvas"></canvas>
<canvas id="waveCanvas"></canvas>

<div id="container">
  <header>Fahim's Password Analyzer</header>

  <input type="password" id="password" placeholder="Enter password">
  
  <div class="meter"><div class="meter-fill" id="meter"></div></div>
  <div id="strength">Strength: </div>
  <div id="entropy">Entropy: </div>
  <div id="complexity"></div>
  
  <button id="checkBreach">Check Breach</button>
  <button id="generate">Generate Strong Password</button>
  
  <div id="generatedBox">
    Generated Password: <span id="generatedPw"></span>
    <br>
    <button id="copyBtn">Copy to Clipboard</button>
    <button id="toggleGenerated">Hide</button>
  </div>
  
  <div id="breach"></div>
  
  <div id="proofPanel">
    <h4>Proof Mode C: Breach Verification</h4>
    <div id="hashPrefix"></div>
    <div id="hashSuffix"></div>
    <div id="apiEndpoint"></div>
    <div id="apiResponse"></div>
    <div id="kAnonExplanation"></div>
  </div>
</div>

<script>
// -------------------- Background Grid --------------------
const canvas = document.getElementById('bgCanvas');
const ctx = canvas.getContext('2d');
let w = canvas.width = window.innerWidth;
let h = canvas.height = window.innerHeight;
let lines = [];
const numLines = 50;
for(let i=0;i<numLines;i++){
  lines.push({x:Math.random()*w, y:Math.random()*h, length:Math.random()*200+50, speed:Math.random()*0.7+0.3});
}
function drawLines(){
  ctx.clearRect(0,0,w,h);
  ctx.strokeStyle='#00ffea22';
  ctx.lineWidth=1;
  lines.forEach(l=>{
    ctx.beginPath();
    ctx.moveTo(l.x,l.y);
    ctx.lineTo(l.x,l.y+l.length);
    ctx.stroke();
    l.y-=l.speed;
    if(l.y+l.length<0) l.y=h;
  });
  requestAnimationFrame(drawLines);
}
drawLines();
window.addEventListener('resize',()=>{w=canvas.width=window.innerWidth; h=canvas.height=window.innerHeight;});

// -------------------- Cyber Wave --------------------
const waveCanvas=document.getElementById('waveCanvas');
const waveCtx=waveCanvas.getContext('2d');
waveCanvas.width=w; waveCanvas.height=h;
let waveOffset=0;
function drawWave(){
  waveCtx.clearRect(0,0,w,h);
  waveCtx.strokeStyle='rgba(0,255,234,0.15)';
  waveCtx.lineWidth=2;
  waveCtx.beginPath();
  for(let x=0;x<w;x++){
    let y=h/2+Math.sin((x+waveOffset)/50)*30;
    if(x===0) waveCtx.moveTo(x,y); else waveCtx.lineTo(x,y);
  }
  waveCtx.stroke();
  waveOffset+=2;
  requestAnimationFrame(drawWave);
}
drawWave();
window.addEventListener('resize',()=>{waveCanvas.width=w; waveCanvas.height=h;});

// -------------------- Particles --------------------
const container=document.getElementById('container');
let particles=[];
for(let i=0;i<60;i++){
  let p=document.createElement('div');
  p.className='particle';
  p.style.left=Math.random()*w+'px';
  p.style.top=Math.random()*h+'px';
  container.appendChild(p);
  particles.push(p);
}
setInterval(()=>{
  particles.forEach(p=>{
    let top=parseFloat(p.style.top);
    top-=1+Math.random();
    if(top<0) top=h;
    p.style.top=top+'px';
  });
},30);

// -------------------- Password Analyzer --------------------
const passwordInput=document.getElementById('password');
const meter=document.getElementById('meter');
const strengthText=document.getElementById('strength');
const entropyText=document.getElementById('entropy');
const complexityText=document.getElementById('complexity');
const breachBtn=document.getElementById('checkBreach');
const breachDiv=document.getElementById('breach');
const proofPanel=document.getElementById('proofPanel');
const hashPrefixDiv=document.getElementById('hashPrefix');
const hashSuffixDiv=document.getElementById('hashSuffix');
const apiEndpointDiv=document.getElementById('apiEndpoint');
const apiResponseDiv=document.getElementById('apiResponse');
const kAnonExplanationDiv=document.getElementById('kAnonExplanation');

function evaluatePassword(pw){
  let score=0, charset=0;
  let complexity='';
  if(/[a-z]/.test(pw)){score+=1; charset+=26; complexity+='Lowercase '; }
  if(/[A-Z]/.test(pw)){score+=1; charset+=26; complexity+='Uppercase '; }
  if(/[0-9]/.test(pw)){score+=1; charset+=10; complexity+='Numbers '; }
  if(/[^A-Za-z0-9]/.test(pw)){score+=2; charset+=32; complexity+='Symbols '; }
  if(pw.length>=8) score+=2;
  if(pw.length>=12) score+=2;
  const entropy=Math.log2(Math.pow(charset,pw.length)||1).toFixed(1);
  return {score, entropy, complexity};
}
function getStrengthLabel(score){
  if(score<=2) return 'Weak';
  if(score<=4) return 'Medium';
  if(score<=6) return 'Strong';
  return 'Very Strong';
}

passwordInput.addEventListener('input',()=>{
  const pw=passwordInput.value;
  const {score, entropy, complexity}=evaluatePassword(pw);
  meter.style.width=(score/8*100)+'%';
  strengthText.textContent='Strength: '+getStrengthLabel(score);
  entropyText.textContent='Entropy: '+entropy+' bits';
  complexityText.textContent='Complexity: '+complexity;
  breachDiv.textContent='';
  proofPanel.style.display='none';
});

// -------------------- Breach Check --------------------
breachBtn.addEventListener('click',async()=>{
  const pw=passwordInput.value;
  if(!pw) return alert('Enter a password first');
  const encoder=new TextEncoder();
  const data=encoder.encode(pw);
  const hashBuffer=await crypto.subtle.digest('SHA-1',data);
  const hashArray=Array.from(new Uint8Array(hashBuffer));
  const hashHex=hashArray.map(b=>b.toString(16).padStart(2,'0')).join('').toUpperCase();
  const prefix=hashHex.slice(0,5);
  const suffix=hashHex.slice(5);
  const res=await fetch(`https://api.pwnedpasswords.com/range/${prefix}`);
  const text=await res.text();
  const lines=text.split('\n');
  const match=lines.find(line=>line.split(':')[0]===suffix);
  if(match){
    const count=match.split(':')[1];
    breachDiv.textContent=`⚠️ Password FOUND in ${count} breaches!`;
    breachDiv.classList.add('glow-alert');
  } else {
    breachDiv.textContent='✅ Password NOT found in known breaches.';
    breachDiv.classList.remove('glow-alert');
  }
  // Proof Mode C display
  proofPanel.style.display='block';
  hashPrefixDiv.textContent='SHA-1 Prefix Sent: '+prefix;
  hashSuffixDiv.textContent='SHA-1 Suffix (local match): '+suffix;
  apiEndpointDiv.textContent='API Endpoint Called: https://api.pwnedpasswords.com/range/'+prefix;
  apiResponseDiv.textContent='Partial API Response (first 10 lines):\n'+lines.slice(0,10).join('\n');
  kAnonExplanationDiv.textContent='k-Anonymity ensures your password is never fully sent. Trusted by Microsoft, 1Password, Cloudflare.';
});

// -------------------- Generate Strong Password --------------------
const generateBtn=document.getElementById('generate');
const generatedBox=document.getElementById('generatedBox');
const generatedPw=document.getElementById('generatedPw');
const copyBtn=document.getElementById('copyBtn');
const toggleGenerated=document.getElementById('toggleGenerated');

generateBtn.addEventListener('click',()=>{
  const chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+-=[]{}|;:,.<>?";
  let pw='';
  for(let i=0;i<16;i++) pw+=chars.charAt(Math.floor(Math.random()*chars.length));
  generatedPw.textContent=pw;
  generatedBox.style.display='block';
  toggleGenerated.textContent='Hide';
});

copyBtn.addEventListener('click',()=>{
  navigator.clipboard.writeText(generatedPw.textContent);
  alert('Password copied to clipboard!');
});

toggleGenerated.addEventListener('click',()=>{
  if(generatedBox.style.display==='none'){generatedBox.style.display='block'; toggleGenerated.textContent='Hide';}
  else {generatedBox.style.display='none'; toggleGenerated.textContent='Show';}
});
</script>
</body>
</html>
